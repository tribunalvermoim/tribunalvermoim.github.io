import{handleCarAdd}from"./components/shoppingBag.js";import{fetchCars}from"./components/fetchCars.js";import{filterCars}from"./components/filterCars.js";fetchCars();document.getElementById("cars-search").addEventListener("input",filterCars);import{setLoading}from"./loadingSpinner.js";export var cars=[];export function fetchCars(){setLoading(true);fetch("mocks/listHero.json").then(async response=>{cars=await response.json();setTimeout(printCars,1e3)})}function printCars(){const carsList=document.getElementById("cars-list");for(let[index,item]of cars.entries()){carsList.innerHTML+='<article id="car-id-'+index+'">'+'<p class="car-name">'+item.modelClass+" "+item.version+"</p>"+'<div class="car-box">'+'<img class="car-img" src="'+item.imagePath+'" alt="'+item.modelClass+" "+item.version+'" width="640" height="360">'+'<p class="car-price">'+Intl.NumberFormat(item.price.locale,{style:"currency",currency:item.price.currency}).format(parseFloat(item.price.amount))+"</p>"+'<button class="car-btn-add" id="car-btn-add-'+index+'" onclick="handleCarAdd('+index+')">Add to Shopping Bag</button>'+"</div>"+"</article>"}setLoading(false)}import{cars}from"./fetchCars.js";export function filterCars(e){let filter=null;let filteredCars=0;if(e.target.value.length>2){filter=e.target.value}for(let[index,item]of cars.entries()){const carArticle=document.getElementById("car-id-"+index);if(filter!=null&&!(item.modelClass+" "+item.version).toLowerCase().includes(filter.toLowerCase())){carArticle.style.display="none"}else{filteredCars++;carArticle.style.display="block"}}const emptyList=document.getElementById("empty-list");if(filteredCars==0){emptyList.style.display="flex"}else{emptyList.style.display="none"}}export function setLoading(set){if(set){document.getElementById("is-loading").style.display="table-cell";document.getElementById("cars").style.display="none"}else{document.getElementById("is-loading").style.display="none";document.getElementById("cars").style.display="block"}}import{cars}from"./fetchCars.js";var addedCars=[];export function handleCarAdd(index){let bagPrice=parseFloat(getBagPrice());const carArticle=document.getElementById("car-id-"+index);const carAddBtn=document.getElementById("car-btn-add-"+index);if(addedCars.includes(index)){addedCars=addedCars.filter(function(value){return value!=index});setBagPrice(bagPrice-parseFloat(cars[index].price.amount),cars[index].price);carArticle.classList.remove("in-bag");carAddBtn.innerText="Add to Shopping Bag"}else{addedCars.push(index);setBagPrice(bagPrice+parseFloat(cars[index].price.amount),cars[index].price);carArticle.classList.add("in-bag");carAddBtn.innerText="Remove from Shopping Bag"}}window.handleCarAdd=handleCarAdd;function setBagPrice(bagPrice,carPrice){const bagElement=document.getElementById("bag-price");bagElement.innerText=Intl.NumberFormat(carPrice.locale,{style:"currency",currency:carPrice.currency}).format(bagPrice);bagElement.value=bagPrice}function getBagPrice(){const bagElement=document.getElementById("bag-price");return bagElement.value}